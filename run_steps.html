<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>Run Steps – Overview</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<style>
  :root{
    --bg:#fff; --text:#111827; --muted:#6b7280; --border:#e5e7eb; --codebg:#f6f8fa;
    --link:#2563eb; --ok:#16a34a; --warn:#f59e0b; --next:#0ea5e9;
  }
  *{box-sizing:border-box}
  body{margin:0;background:var(--bg);color:var(--text);font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;line-height:1.55}
  .container{max-width:920px;margin:0 auto;padding:28px 16px}
  h1{margin:0 0 6px 0;font-size:28px}
  h2{margin:22px 0 10px;font-size:20px}
  p{margin:8px 0}
  .lead{color:var(--muted)}
  .cards{display:grid;grid-template-columns:1fr;gap:14px;margin-top:16px}
  .card{border:1px solid var(--border);border-radius:12px;padding:16px;background:#fff}
  .card h2{margin:0 0 6px 0}
  .meta{font-size:13px;color:var(--muted);margin-bottom:8px}
  .badges{display:flex;gap:8px;flex-wrap:wrap;margin:6px 0 10px}
  .badge{display:inline-flex;align-items:center;gap:6px;font-size:12px;border:1px solid var(--border);border-radius:999px;padding:2px 10px;color:var(--muted)}
  .badge.ok{border-color:#dcfce7;color:var(--ok);background:#f0fdf4}
  .badge.warn{border-color:#fef3c7;color:var(--warn);background:#fffbeb}
  .badge.next{border-color:#e0f2fe;color:var(--next);background:#f0f9ff}
  a.button{display:inline-block;background:var(--link);color:#fff;text-decoration:none;padding:10px 14px;border-radius:8px;font-weight:600}
  a.button:hover{filter:brightness(0.95)}
  .links{display:flex;gap:10px;flex-wrap:wrap;margin-top:8px}
  .small{font-size:13px;color:var(--muted)}
  .list{margin:6px 0 0 18px}
  @media (min-width: 820px){ .cards{grid-template-columns:1fr 1fr} }
</style>
</head>
<body>
<div class="container">
  <header>
    <h1>Run Steps – NYC Taxi Pipeline (Overview)</h1>
    <p class="lead">High-level map of the pipeline. Jump into detailed instructions per phase.</p>
  </header>

  <section class="cards">

    <!-- Phase 1 & 2 -->
    <article class="card">
      <h2>Phases 1 &amp; 2 — Validation &amp; Conversion</h2>
      <div class="meta">Parquet → Validate → Convert to PSV → Validate PSV → Data Dictionary</div>
      <div class="badges">
        <span class="badge ok">Status: Complete</span>
        <span class="badge">Artifacts: <code>validation_summary.csv</code>, <code>psv_conversion_summary.csv</code>, <code>psv_validation_summary.csv</code></span>
        <span class="badge">Dictionary: <code>yellow_tripdata.dictionary.(csv|md)</code></span>
      </div>
      <ul class="list">
        <li>Schema/profile/preview for Parquet and PSV</li>
        <li>PSV conversion with LIMITED flagging when sampled</li>
        <li>Single authoritative data dictionary (month dropped)</li>
      </ul>
      <div class="links">
        <a class="button" href="/validation_steps">Open Validation Steps</a>
        <a class="button" href="/yellow_tripdata.dictionary.csv" style="background:#059669">Download Dictionary</a>
      </div>
    </article>

    <!-- Phase 3 -->
    <article class="card">
      <h2>Phase 3 — Load into SQL Server</h2>
      <div class="meta">CREATE TABLE &amp; BULK INSERT from PSV</div>
      <div class="badges">
        <span class="badge next">Status: Next</span>
        <span class="badge">Drivers: <code>pyodbc</code></span>
        <span class="badge">Inputs: <code>data_out/*.psv</code></span>
      </div>
      <ul class="list">
        <li>Generate <code>CREATE TABLE</code> from dictionary</li>
        <li>Bulk import via <code>BULK INSERT</code> / <code>OPENROWSET</code></li>
        <li>Row count reconciliation with summaries</li>
      </ul>
      <div class="links">
        <a class="button" href="/phase3_sqlserver">Open Phase 3 Guide</a>
      </div>
    </article>

    <!-- Phase 4 -->
    <article class="card">
      <h2>Phase 4 — Load into PostgreSQL</h2>
      <div class="meta">COPY FROM for PSV</div>
      <div class="badges">
        <span class="badge warn">Status: Planned</span>
        <span class="badge">Drivers: <code>psycopg2-binary</code></span>
      </div>
      <ul class="list">
        <li>Type mapping: DuckDB → Postgres</li>
        <li>Staging vs. target schemas</li>
      </ul>
      <div class="links">
        <a class="button" href="/phase4_postgres">Open Phase 4 Guide</a>
      </div>
    </article>

    <!-- Phase 5+ -->
    <article class="card">
      <h2>Phase 5+ — Orchestration &amp; Analytics</h2>
      <div class="meta">DAGs, scheduled runs, BI</div>
      <div class="badges">
        <span class="badge warn">Status: Planned</span>
        <span class="badge">Tools: <code>Airflow</code>, <code>Power BI</code> / <code>Looker</code></span>
      </div>
      <ul class="list">
        <li>Automate pipeline with Airflow</li>
        <li>Data quality checks &amp; alerts</li>
        <li>Dashboards and reporting</li>
      </ul>
      <div class="links">
        <a class="button" href="/orchestration">Open Orchestration</a>
      </div>
    </article>

  </section>

  <section class="card">
    <h2>Quick Links</h2>
    <ul class="list">
      <li><a href="/validation_steps">Validation Steps (detailed guide)</a></li>
      <li><a href="/yellow_tripdata.dictionary.csv">Data Dictionary (CSV)</a> &nbsp;|&nbsp; <a href="/yellow_tripdata.dictionary.md">Data Dictionary (Markdown)</a></li>
      <li><a href="/psv_conversion_summary.csv">PSV Conversion Summary</a></li>
      <li><a href="/psv_validation_summary.csv">PSV Validation Summary</a></li>
    </ul>
  </section>

  <p class="small">Tip: If a link 404s, ensure the file exists at that path or update the href to your repo structure.</p>
</div>
</body>
</html>
